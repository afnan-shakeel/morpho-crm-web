import{a as de,b as Me,d as Ne}from"./chunk-POUALKY6.js";import"./chunk-GTAFJL4P.js";import{a as ce}from"./chunk-XUUMAHLE.js";import{a as se}from"./chunk-GK3J37A3.js";import{b as Ie}from"./chunk-VCNEJXGR.js";import{a as Te}from"./chunk-C3RZJLGD.js";import{a as le,b as L}from"./chunk-Q7BWANAG.js";import"./chunk-ZZ24IKKX.js";import{a as re}from"./chunk-IFSTEAGB.js";import"./chunk-BYXBJQAS.js";import"./chunk-T4HB4AXC.js";import{C as Ce,D as R,E as X,F as ee,H as te,K as ne,L as Ee,M as oe,N as we,O as ke,P as Fe,S as ie,U as ae,g as w,o as Se,q as Y,w as J}from"./chunk-YMK4QOIO.js";import{$ as A,Ab as K,Cb as he,Db as r,Ea as j,Eb as E,Fb as u,Gb as be,Lb as _e,Ob as Ae,Pa as S,V as h,_,aa as I,ba as T,bb as y,cb as x,db as $,eb as M,fb as N,gb as m,hb as o,ia as F,ib as a,jb as s,kb as f,la as W,lb as g,pb as C,qb as ve,tb as b,vb as p,wa as xe,yb as Q,za as l,zb as Z}from"./chunk-MI4VSIZJ.js";var Re=(i,n)=>n.countryId;function Oe(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("companyName"))==null||t.errors==null)&&t.errors.required?"Company name is required.":""," ")}}function Be(i,n){i&1&&(o(0,"div",10),r(1),a()),i&2&&(l(),u(" ","Company phone is required."," "))}function Ue(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("companyEmail"))==null||t.errors==null)&&t.errors.email?"Please enter a valid email address.":""," ")}}function qe(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),be(" ",!((t=e.accountForm.get("companyWebsite"))==null||t.errors==null)&&t.errors.required?"Company website is required.":""," ",!((t=e.accountForm.get("companyWebsite"))==null||t.errors==null)&&t.errors.url?"Please enter a valid URL.":""," ")}}function ze(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("companySize"))==null||t.errors==null)&&t.errors.required?"Company size is required.":""," ")}}function Ge(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.addressLine1"))==null||t.errors==null)&&t.errors.required?"Address line 1 is required.":""," ")}}function He(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.addressLine2"))==null||t.errors==null)&&t.errors.required?"Address line 2 is required.":""," ")}}function We(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.city"))==null||t.errors==null)&&t.errors.required?"City is required.":""," ")}}function je(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.state"))==null||t.errors==null)&&t.errors.required?"State is required.":""," ")}}function $e(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.postalCode"))==null||t.errors==null)&&t.errors.required?"Postal code is required.":""," ")}}function Qe(i,n){if(i&1&&(o(0,"option",41),r(1),a()),i&2){let t=n.$implicit;m("value",t.name),l(),E(t.name)}}function Ze(i,n){if(i&1&&(o(0,"div",10),r(1),a()),i&2){let t,e=p();l(),u(" ",!((t=e.accountForm.get("address.country"))==null||t.errors==null)&&t.errors.required?"Country is required.":""," ")}}var P=class i{fb=h(ie);accountsService=h(L);userService=h(se);countriesService=h(Ie);accountId=null;isEditMode=!1;formTitle="Create Account";formSubmit=new j;resetFormEvent=!1;userList=[];accountStatuses=Object.values(de);countries=[];accountForm=this.fb.group({accountId:[this.accountId],companyName:["",R.required],industry:[""],companyPhone:["",R.required],companyEmail:["",R.email],companyWebsite:[""],companySize:[""],accountStatus:["Pending"],accountOwnerId:["",R.required],address:this.fb.group({addressLine1:[""],addressLine2:[""],city:[""],state:[""],postalCode:[""],country:[""]})});ngOnChanges(n){n.accountId&&(this.accountForm.reset(),this.accountId&&this.populateForm(this.accountId),this.loadUserList(),this.loadCountries()),n.resetFormEvent&&this.resetFormEvent&&(this.accountForm.reset(),this.isEditMode=!1,this.formTitle="Create Account")}ngOnInit(){this.loadCountries()}ngAfterViewInit(){this.loadUserList()}populateForm(n){n&&this.accountsService.getAccountById(n,!0).subscribe(t=>{if(this.accountForm.patchValue({accountId:t.accountId,companyName:t.companyName,industry:t.industry,companyPhone:t.companyPhone,companyEmail:t.companyEmail,companyWebsite:t.companyWebsite,companySize:t.companySize,accountStatus:t.accountStatus,accountOwnerId:t.accountOwnerId}),t.accountAddress&&t.accountAddress.length>0){let e=t.accountAddress.filter(c=>c.isPrimary===!0);this.accountForm.get("address")?.patchValue({addressLine1:e[0]?.addressLine1,addressLine2:e[0]?.addressLine2||null,city:e[0]?.city,state:e[0]?.state,postalCode:e[0]?.postalCode,country:e[0]?.country})}})}loadUserList(n=""){let t=n?n.trim():"";this.userService.getUsers(t,20,0).subscribe(d=>{this.userList=d.data})}loadCountries(){this.countriesService.getCountries().subscribe({next:n=>{this.countries=n},error:n=>{console.error("Error loading countries:",n)}})}onSubmit(){if(this.accountForm.markAllAsTouched(),this.accountForm.valid){let n=this.accountForm.value;this.formSubmit.emit(n)}}closeForm(){this.formSubmit.emit(null),this.accountForm.reset(),this.isEditMode=!1,this.formTitle="Create Account"}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-account-form"]],inputs:{accountId:"accountId",isEditMode:"isEditMode",formTitle:"formTitle",resetFormEvent:"resetFormEvent"},outputs:{formSubmit:"formSubmit"},features:[W],decls:104,vars:13,consts:[[1,"space-y-8","dark:divide-white/10",3,"ngSubmit","formGroup"],[1,"pb-6","dark:border-white/10"],[1,"text-base/7","font-semibold","text-gray-900","dark:text-white"],[1,"mt-1","text-sm/6","text-gray-600","dark:text-gray-400"],[1,"mt-10","grid","grid-cols-1","gap-x-6","gap-y-4","sm:grid-cols-6"],[1,"sm:col-span-4"],["for","companyName",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"text-red-500"],[1,"mt-2"],["id","companyName","type","text","name","companyName","formControlName","companyName","autocomplete","organization","placeholder","Enter company name",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"mt-1","text-xs","text-red-500"],[1,"sm:col-span-2"],["for","city",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["formControlName","accountOwnerId","size","sm","placeholder","Select Owner",3,"options"],["for","companyPhone",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","companyPhone","type","text","name","companyPhone","formControlName","companyPhone","autocomplete","tel","placeholder","Enter company phone",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],["for","companyEmail",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","companyEmail","type","email","name","companyEmail","formControlName","companyEmail","autocomplete","email","placeholder","Enter email address",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"col-span-4"],["for","companyWebsite",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"flex","items-center","rounded-md","bg-white","pl-3","outline-1","-outline-offset-1","outline-gray-300","focus-within:outline-2","focus-within:-outline-offset-2","focus-within:outline-primary-600"],[1,"shrink-0","text-base","text-gray-500","select-none","sm:text-sm/6","dark:text-gray-400"],["id","companyWebsite","type","text","name","companyWebsite","formControlName","companyWebsite","autocomplete","url","placeholder","Enter company website",1,"block","min-w-0","grow","py-1","pr-3","pl-1","text-base","text-gray-900","placeholder:text-gray-400","focus:outline-none","sm:text-sm/6"],["id","companySize","type","text","name","companySize","formControlName","companySize","autocomplete","off","placeholder","Enter company size",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],["formGroupName","address",1,"border-b","border-gray-900/10","pb-12","dark:border-white/10"],[1,"col-span-full"],["for","addressLine1",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","addressLine1","type","text","name","addressLine1","formControlName","addressLine1","autocomplete","address-line1","placeholder","Enter address line 1",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],["for","addressLine2",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","addressLine2","type","text","name","addressLine2","formControlName","addressLine2","autocomplete","address-line2","placeholder","Enter address line 2",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"sm:col-span-2","sm:col-start-1"],["id","city","type","text","name","city","formControlName","city","autocomplete","address-level2","placeholder","Enter city",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],["for","region",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","state","type","text","name","state","formControlName","state","autocomplete","address-level1","placeholder","Enter state or province",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],["for","postal-code",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],["id","postalCode","type","text","name","postalCode","formControlName","postalCode","autocomplete","postal-code","placeholder","Enter ZIP or postal code",1,"block","w-full","rounded-md","bg-white","px-3","py-1","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"sm:col-span-3"],["for","country",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"mt-2","grid","grid-cols-1"],["id","country","name","country","formControlName","country","autocomplete","country-name",1,"col-start-1","row-start-1","w-full","appearance-none","rounded-md","bg-white","py-1","pr-8","pl-3","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:*:bg-gray-800","dark:focus:outline-primary-500"],["value",""],[3,"value"],["viewBox","0 0 16 16","fill","currentColor","data-slot","icon","aria-hidden","true",1,"pointer-events-none","col-start-1","row-start-1","mr-2","size-5","self-center","justify-self-end","text-gray-500","sm:size-4","dark:text-gray-400"],["d","M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule","evenodd","fill-rule","evenodd"],[1,"mt-6","flex","items-center","justify-end","gap-x-6"],["type","button",1,"text-sm/6","font-semibold","text-gray-900","dark:text-white",3,"click"],["type","submit",1,"rounded-md","bg-primary-500","px-3","py-2","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-600","dark:bg-primary-500","dark:shadow-none","dark:focus-visible:outline-primary-500"]],template:function(t,e){if(t&1&&(o(0,"form",0),b("ngSubmit",function(){return e.onSubmit()}),o(1,"div",1)(2,"h2",2),r(3,"Account Information"),a(),o(4,"p",3),r(5,"Details information about the company. "),a(),o(6,"div",4)(7,"div",5)(8,"label",6),r(9," Company Name "),o(10,"span",7),r(11,"*"),a()(),o(12,"div",8),s(13,"input",9),y(14,Oe,2,1,"div",10),a()(),o(15,"div",11)(16,"label",12),r(17,"Account Owner "),o(18,"span",7),r(19,"*"),a()(),o(20,"div",8),s(21,"app-user-selection-input",13),a()(),o(22,"div",11)(23,"label",14),r(24," Phone "),o(25,"span",7),r(26,"*"),a()(),o(27,"div",8),s(28,"input",15),y(29,Be,2,1,"div",10),a()(),o(30,"div",11)(31,"label",16),r(32,"Business Mail"),a(),o(33,"div",8),s(34,"input",17),y(35,Ue,2,1,"div",10),a()(),o(36,"div",18)(37,"label",19),r(38,"Company Website"),a(),o(39,"div",8)(40,"div",20)(41,"div",21),r(42,"https://"),a(),s(43,"input",22),a(),y(44,qe,2,2,"div",10),a()(),o(45,"div",11)(46,"label",12),r(47,"Company Size"),a(),o(48,"div",8),s(49,"input",23),y(50,ze,2,1,"div",10),a()()()(),o(51,"div",24)(52,"h2",2),r(53,"Address Information"),a(),o(54,"p",3),r(55,"Use a bussiness address where you can reach the company. "),a(),o(56,"div",4)(57,"div",25)(58,"label",26),r(59,"Address Line 1"),a(),o(60,"div",8),s(61,"input",27),y(62,Ge,2,1,"div",10),a()(),o(63,"div",25)(64,"label",28),r(65,"Address Line 2"),a(),o(66,"div",8),s(67,"input",29),y(68,He,2,1,"div",10),a()(),o(69,"div",30)(70,"label",12),r(71,"City"),a(),o(72,"div",8),s(73,"input",31),y(74,We,2,1,"div",10),a()(),o(75,"div",11)(76,"label",32),r(77,"State / Province"),a(),o(78,"div",8),s(79,"input",33),y(80,je,2,1,"div",10),a()(),o(81,"div",11)(82,"label",34),r(83,"ZIP / Postal code"),a(),o(84,"div",8),s(85,"input",35),y(86,$e,2,1,"div",10),a()(),o(87,"div",36)(88,"label",37),r(89,"Country"),a(),o(90,"div",38)(91,"select",39)(92,"option",40),r(93,"Select a country"),a(),M(94,Qe,2,2,"option",41,Re),a(),y(96,Ze,2,1,"div",10),I(),o(97,"svg",42),s(98,"path",43),a()()()()(),T(),o(99,"div",44)(100,"button",45),b("click",function(){return e.closeForm()}),r(101,"Cancel"),a(),o(102,"button",46),r(103,"Save"),a()()()),t&2){let c,d,v,k,O,B,U,q,z,G,H;m("formGroup",e.accountForm),l(14),x((c=e.accountForm.get("companyName"))!=null&&c.touched&&((c=e.accountForm.get("companyName"))!=null&&c.invalid)?14:-1),l(7),m("options",e.userList),l(8),x(((d=e.accountForm.get("companyPhone"))!=null&&d.touched||(d=e.accountForm.get("companyPhone"))!=null&&d.dirty)&&((d=e.accountForm.get("companyPhone"))!=null&&d.invalid)?29:-1),l(6),x((v=e.accountForm.get("companyEmail"))!=null&&v.touched&&((v=e.accountForm.get("companyEmail"))!=null&&v.invalid)?35:-1),l(9),x((k=e.accountForm.get("companyWebsite"))!=null&&k.touched&&((k=e.accountForm.get("companyWebsite"))!=null&&k.invalid)?44:-1),l(6),x((O=e.accountForm.get("companySize"))!=null&&O.touched&&((O=e.accountForm.get("companySize"))!=null&&O.invalid)?50:-1),l(12),x((B=e.accountForm.get("address.addressLine1"))!=null&&B.touched&&((B=e.accountForm.get("address.addressLine1"))!=null&&B.invalid)?62:-1),l(6),x((U=e.accountForm.get("address.addressLine2"))!=null&&U.touched&&((U=e.accountForm.get("address.addressLine2"))!=null&&U.invalid)?68:-1),l(6),x((q=e.accountForm.get("address.city"))!=null&&q.touched&&((q=e.accountForm.get("address.city"))!=null&&q.invalid)?74:-1),l(6),x((z=e.accountForm.get("address.state"))!=null&&z.touched&&((z=e.accountForm.get("address.state"))!=null&&z.invalid)?80:-1),l(6),x((G=e.accountForm.get("address.postalCode"))!=null&&G.touched&&((G=e.accountForm.get("address.postalCode"))!=null&&G.invalid)?86:-1),l(8),N(e.countries),l(2),x((H=e.accountForm.get("address.country"))!=null&&H.touched&&((H=e.accountForm.get("address.country"))!=null&&H.invalid)?96:-1)}},dependencies:[ae,te,ke,Fe,Ce,we,X,ee,ne,oe,Ee,ce],encapsulation:2})};var Pe={Active:"green",Inactive:"red",Pending:"orange"},Le={Active:"bg-green-50 text-green-700 inset-ring-green-600/10 dark:bg-green-400/10 dark:text-green-400 dark:inset-ring-green-400/20",Inactive:"bg-red-50 text-red-700 inset-ring-red-600/10 dark:bg-red-400/10 dark:text-red-400 dark:inset-ring-red-400/20",Pending:"bg-orange-50 text-orange-700 inset-ring-orange-600/10 dark:bg-orange-400/10 dark:text-orange-400 dark:inset-ring-orange-400/20"};function Ve(i){return Le[i]||Le.Active}var Ke=["accountForm"],Ye=()=>({multiSelect:!1,rowReferenceField:"accountId"}),ue=class i{accountForm;router=h(Y);accountsService=h(L);toastService=h(J);pageBreadcrumbs=[{label:"Home",path:"/"},{label:"Accounts",path:"/accounts/list"}];accounts=[];selectedAccountIdToUpdate=F(null);columns=[{field:"accountId",label:"Account ID",hidden:!0},{field:"companyName",label:"Company Name",cellTemplate:"link",hrefField:"accounts/:accountId"},{field:"accountStatus",label:"Account Status",cellTemplate:"color-badge",colorBadgeMapper:Pe},{field:"companyEmail",label:"Company Mail"},{field:"createdAt",label:"Created Time",cellTemplate:"datetime"}];loading=!1;currentPage=1;pageSize=10;totalRecords=0;searchQuery="";accountStatusOptions=[{label:"Active",value:"Active"},{label:"Inactive",value:"Inactive"},{label:"Pending",value:"Pending"}];filters=[{field:"accountStatus",label:"Account Status",value:"",type:"select",options:this.accountStatusOptions},{field:"createdAt",label:"Created At",value:null,type:"date"}];filterData={filters:this.filters,config:{}};apiReadyFilterData=[];tableRowActions=[{label:"View",actionCallback:n=>{}},{label:"Edit",actionCallback:n=>{this.selectedAccountIdToUpdate.set(n.accountId),console.log("Editing account:",this.selectedAccountIdToUpdate()),this.openAccountFormModal()}},{label:"Update Status",actionCallback:n=>{}}];ngOnInit(){this.loadAccounts()}loadAccounts(){this.loading=!0;let n={field:"createdAt",order:"desc"},t=this.apiReadyFilterData;this.accountsService.getAccounts(this.searchQuery,t,n,this.currentPage,this.pageSize).subscribe({next:e=>{let c=e.data||[];this.accounts=c.map(d=>{let v={};return this.columns.forEach(k=>{v[k.field]=d[k.field]}),v}),this.totalRecords=e.total,this.loading=!1},error:e=>{console.error("Error fetching accounts:",e),this.loading=!1}})}onPageChangeHandler(n){this.currentPage=n,this.loadAccounts()}onSearchChange(n){this.searchQuery=n,this.currentPage=1,this.loadAccounts()}onFilterChange(n){if(!n||n.length===0){this.apiReadyFilterData=[],this.currentPage=1,this.loadAccounts();return}let e=n.filter(c=>c.value).map(c=>{let d="contains";return c.type==="select"&&(d="equals"),c.type==="date"&&(d="equals"),c.type==="multiselect"&&(d="list"),{field:c.field,value:c.value,type:d}});this.apiReadyFilterData=e,this.currentPage=1,this.loadAccounts()}onCreateAccount(){this.openAccountFormModal()}resetFormEvent=F(!1);openAccountFormModal(){this.accountForm.open()}closeAccountFormModal(){this.accountForm.close(),this.selectedAccountIdToUpdate.set(null)}onAccountFormSubmit(n){if(!n){this.closeAccountFormModal();return}console.log("Account form submitted with data:",n),n.accountId?this.updateAccount(n.accountId,n):this.createAccount(n)}createAccount(n){this.accountsService.createAccount(n).subscribe({next:t=>{t&&t.accountId&&(this.toastService.success("Account created successfully!"),this.resetFormEvent.set(!0),this.loadAccounts(),this.closeAccountFormModal())},error:t=>{console.error("Error creating account:",t)}})}updateAccount(n,t){this.accountsService.updateAccount(n,t).subscribe({next:e=>{e&&e.accountId&&(this.toastService.success("Account updated successfully!"),this.resetFormEvent.set(!0),this.loadAccounts(),this.closeAccountFormModal())},error:e=>{console.error("Error updating account:",e)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-accounts-listing"]],viewQuery:function(t,e){if(t&1&&Q(Ke,5),t&2){let c;Z(c=K())&&(e.accountForm=c.first)}},decls:16,vars:14,consts:[["accountForm",""],[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,""],["description","A list of all the accounts in your system.",3,"title","breadcrumbs"],[1,"sm:mt-0","sm:ml-16","sm:flex-none"],["type","button",1,"block","rounded-md","bg-primary-500","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-500","dark:bg-primary-500","dark:hover:bg-indigo-400","dark:focus-visible:outline-primary-500",3,"click"],[3,"pageChange","search","filterChange","records","columns","currentPage","pageSize","totalRecords","filterData","rowActions","tableConfig"],[3,"closeModal","modalId"],[1,"mt-3","text-center","sm:mt-0","sm:text-left"],[1,"mt-2"],[1,"mt-4"],[3,"formSubmit","accountId","resetFormEvent"],[1,"mt-5","sm:mt-4","sm:flex","sm:flex-row-reverse"]],template:function(t,e){if(t&1){let c=C();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),s(4,"app-page-heading",5),a()(),o(5,"div",6)(6,"button",7),b("click",function(){return _(c),A(e.onCreateAccount())}),r(7,"Add account"),a()()(),o(8,"app-custom-datatable",8),b("pageChange",function(v){return _(c),A(e.onPageChangeHandler(v))})("search",function(v){return _(c),A(e.onSearchChange(v))})("filterChange",function(v){return _(c),A(e.onFilterChange(v))}),a()(),o(9,"app-modal-medium",9,0),b("closeModal",function(){return _(c),A(e.closeAccountFormModal())}),o(11,"div",10),s(12,"div",11),o(13,"div",12)(14,"app-account-form",13),b("formSubmit",function(v){return _(c),A(e.onAccountFormSubmit(v))}),a()()(),s(15,"div",14),a()}t&2&&(l(4),m("title","Accounts")("breadcrumbs",e.pageBreadcrumbs),l(4),m("records",e.accounts)("columns",e.columns)("currentPage",e.currentPage)("pageSize",e.pageSize)("totalRecords",e.totalRecords)("filterData",e.filterData)("rowActions",e.tableRowActions)("tableConfig",Ae(13,Ye)),l(),m("modalId","account-form-modal"),l(5),m("accountId",e.selectedAccountIdToUpdate())("resetFormEvent",e.resetFormEvent()))},dependencies:[re,Te,P,le],encapsulation:2})};var me=class i{status="Pending";get badgeClasses(){return Ve(this.status)}get statusText(){return this.status}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-status-badge"]],inputs:{status:"status"},decls:2,vars:3,consts:[[1,"inline-flex","items-center","rounded-full","px-2","py-1","text-xs","font-medium","inset-ring"]],template:function(t,e){t&1&&(f(0,"span",0),r(1),g()),t&2&&(he(e.badgeClasses),l(),u(" ",e.statusText,`
`))},encapsulation:2})};function Je(i,n){if(i&1&&s(0,"app-status-badge",5),i&2){let t=p();m("status",t.account.accountStatus||"Unknown")}}function Xe(i,n){if(i&1){let t=C();o(0,"button",17),b("click",function(){let c=_(t).$implicit;return A(c.handler())}),r(1),a()}if(i&2){let t=n.$implicit;l(),u(" ",t.label," ")}}var pe=class i{fb=h(ie);userService=h(se);account=null;openEditAccountModal=new j;userList=[];quickActions=[{label:"Edit Account",handler:()=>{this.openEditAccountModal.emit()}}];ngOnInit(){this.loadUserList()}ngOnChanges(n){let t=n.account;t&&!t.firstChange&&this.populateForm()}headerForm=this.fb.group({ownerId:[""]});loadUserList(n=""){this.userService.getUsers(n,5,0).subscribe(t=>{this.userList=t.data})}populateForm(){this.account&&this.headerForm.patchValue({ownerId:this.account.accountOwnerId})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-account-header-box"]],inputs:{account:"account"},outputs:{openEditAccountModal:"openEditAccountModal"},features:[W],decls:23,vars:4,consts:[[3,"formGroup"],[1,"grid","grid-cols-1","gap-4","sm:grid-cols-2","md:grid-cols-3","lg:grid-cols-3","items-center","justify-between"],[1,"sm:flex-1"],[1,"flex","items-center","gap-3"],[1,"text-base","font-semibold","text-gray-900","dark:text-white"],[3,"status"],[1,"inline-block"],[1,"inline-flex","w-full","justify-center","gap-x-1.5","rounded-md","bg-white","px-3","py-2","text-sm","font-semibold","text-gray-900","shadow-xs","inset-ring-1","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"],["viewBox","0 0 20 20","fill","currentColor","data-slot","icon","aria-hidden","true",1,"-mr-1","size-5","text-gray-400"],["d","M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule","evenodd","fill-rule","evenodd"],["anchor","bottom end","popover","",1,"w-56","origin-top-right","rounded-md","bg-white","shadow-lg","outline-1","outline-black/5","transition","transition-discrete","[--anchor-gap:--spacing(2)]","data-closed:scale-95","data-closed:transform","data-closed:opacity-0","data-enter:duration-100","data-enter:ease-out","data-leave:duration-75","data-leave:ease-in","dark:bg-gray-800","dark:shadow-none","dark:-outline-offset-1","dark:outline-white/10"],[1,"py-1"],["type","button",1,"block","w-full","px-4","py-2","text-left","text-sm","text-gray-700","focus:bg-gray-100","focus:text-gray-900","focus:outline-hidden","dark:text-gray-300","dark:focus:bg-white/5","dark:focus:text-white"],[1,"flex","justify-center"],[1,"text-sm","font-medium","text-gray-500","dark:text-gray-400"],[1,"mt-1"],["formControlName","ownerId","size","xs","placeholder","Select Owner",3,"options"],["type","button",1,"block","w-full","px-4","py-2","text-left","text-sm","text-gray-700","focus:bg-gray-100","focus:text-gray-900","focus:outline-hidden","dark:text-gray-300","dark:focus:bg-white/5","dark:focus:text-white",3,"click"]],template:function(t,e){t&1&&(o(0,"form",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),r(5),a(),y(6,Je,1,1,"app-status-badge",5),a()(),o(7,"div")(8,"el-dropdown",6)(9,"button",7),r(10," Quick Actions "),I(),o(11,"svg",8),s(12,"path",9),a()(),T(),o(13,"el-menu",10)(14,"div",11),M(15,Xe,2,1,"button",12,$),a()()()(),o(17,"div",13)(18,"div")(19,"h2",14),r(20,"Account Owner"),a(),o(21,"div",15),s(22,"app-user-selection-input",16),a()()()()()),t&2&&(m("formGroup",e.headerForm),l(5),E(e.account==null?null:e.account.companyName),l(),x(e.account!=null&&e.account.accountStatus?6:-1),l(9),N(e.quickActions),l(7),m("options",e.userList))},dependencies:[ae,te,X,ee,ne,oe,w,me,ce],encapsulation:2})};var fe=class i{account=null;accountAddress=null;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-account-info-box"]],inputs:{account:"account",accountAddress:"accountAddress"},decls:45,vars:11,consts:[[1,"mt-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-4"],[1,"pt-6","rounded-2xl","shadow-sm","bg-white","p-4","grid","grid-cols-1","sm:grid-cols-2","2xl:grid-cols-2","gap-x-2","justify-between"],[1,"sm:col-span-1","col-span-1","flex","flex-col","gap-2"],[1,"text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"text-sm/6","text-gray-700","dark:text-gray-400"],["target","_blank",1,"text-primary-500","hover:underline","dark:text-primary-300",3,"href"],[1,"pt-6","rounded-2xl","shadow-sm","bg-white","p-4","grid","grid-cols-1","sm:grid-cols-2","2xl:grid-cols-2","justify-between"]],template:function(t,e){t&1&&(f(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),r(5,"Company Phone"),g(),f(6,"div",4),r(7,"Company Mail"),g(),f(8,"div",4),r(9,"Company Size"),g(),f(10,"div",4),r(11,"Company Website"),g()(),f(12,"div",3)(13,"div",5),r(14),g(),f(15,"div",5),r(16),g(),f(17,"div",5),r(18),g(),f(19,"div",5)(20,"a",6),r(21),g()()()(),f(22,"div",7)(23,"div",3)(24,"div",4),r(25,"Address Line 1"),g(),f(26,"div",4),r(27,"Address Line 2"),g(),f(28,"div",4),r(29,"City"),g(),f(30,"div",4),r(31,"ZIP/Postal Code"),g(),f(32,"div",4),r(33,"Country"),g()(),f(34,"div",3)(35,"div",5),r(36),g(),f(37,"div",5),r(38),g(),f(39,"div",5),r(40),g(),f(41,"div",5),r(42),g(),f(43,"div",5),r(44),g()()()()()),t&2&&(l(14),E((e.account==null?null:e.account.companyPhone)||"NA"),l(2),E((e.account==null?null:e.account.companyEmail)||"NA"),l(2),u("",(e.account==null?null:e.account.companySize)||"NA"," "),l(2),ve("href",_e((e.account==null?null:e.account.companyWebsite)||"#"),xe),l(),u(" ",(e.account==null?null:e.account.companyWebsite)||"NA"," "),l(15),u("",(e.accountAddress==null?null:e.accountAddress.addressLine1)||"NA"," "),l(2),u("",(e.accountAddress==null?null:e.accountAddress.addressLine2)||"NA"," "),l(2),E((e.accountAddress==null?null:e.accountAddress.city)||"NA"),l(2),u("",(e.accountAddress==null?null:e.accountAddress.postalCode)||"NA"," "),l(2),u("",(e.accountAddress==null?null:e.accountAddress.country)||"NA"," "))},dependencies:[w],encapsulation:2})};var ge=class i{account=null;primaryContact=null;static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-account-summary"]],inputs:{account:"account",primaryContact:"primaryContact"},decls:6,vars:4,consts:[[1,"grid","grid-cols-1"],[1,"col-span-1"],[1,"col-span-1","border-b","pb-8","border-gray-100"],[3,"account","accountAddress"],[1,"mt-6","col-span-1"],[3,"accountId","activityRelatedEntityId"]],template:function(t,e){t&1&&(o(0,"div",0),s(1,"div",1),o(2,"div",2),s(3,"app-account-info-box",3),a(),o(4,"div",4),s(5,"app-accounts-activity-log",5),a()()),t&2&&(l(3),m("account",e.account||null)("accountAddress",e.account&&e.account.accountAddress&&e.account.accountAddress.length>0?e.account.accountAddress[0]:null),l(2),m("accountId",(e.account==null?null:e.account.accountId)||"")("activityRelatedEntityId",(e.account==null?null:e.account.accountId)||""))},dependencies:[w,fe,Ne],encapsulation:2})};var et=["accountForm"];function tt(i,n){if(i&1){let t=C();o(0,"button",25),b("click",function(){_(t);let c=p().$index,d=p();return A(d.setActiveTab(c))}),r(1),a()}if(i&2){let t=p().$implicit;l(),u(" ",t.label)}}function nt(i,n){if(i&1){let t=C();o(0,"button",26),b("click",function(){_(t);let c=p().$index,d=p();return A(d.setActiveTab(c))}),r(1),a()}if(i&2){let t=p().$implicit;l(),u(" ",t.label)}}function ot(i,n){if(i&1&&y(0,tt,2,1,"button",23)(1,nt,2,1,"button",24),i&2){let t=n.$index,e=p();x(t===e.activeTabIndex()?0:1)}}function it(i,n){if(i&1&&(o(0,"div",5),s(1,"app-account-summary",27),a()),i&2){let t=p();l(),m("account",t.account)("primaryContact",t.primaryContact)}}function at(i,n){i&1&&(o(0,"div"),r(1,"Tasks"),a())}function rt(i,n){i&1&&(o(0,"div"),r(1,"Files"),a())}function lt(i,n){i&1&&(o(0,"div"),r(1,"Related"),a())}var ye=class i{accountForm;router=h(Y);route=h(Se);accountsService=h(L);toastService=h(J);accountId="";account=null;primaryContact=null;pageBreadcrumbs=[{label:"Accounts",path:"/accounts/list"}];tabs=F([{label:"Summary",content:"Summary"},{label:"Tasks",content:"Tasks"},{label:"File Attachments",content:"Files"},{label:"Related",content:"Related"}]);activeTabIndex=F(0);setActiveTab(n){this.activeTabIndex.set(n)}ngOnInit(){this.route.paramMap.subscribe(n=>{let t=n.get("id");t&&(this.accountId=t,this.getAccountDetails())})}getAccountDetails(){this.accountId&&this.accountsService.getAccountById(this.accountId,!0).subscribe(n=>{this.account=n,this.primaryContact=n?.contacts?.find(t=>t.isPrimary)||null,this.pageBreadcrumbs[1]={label:n.companyName,path:`/accounts/${n.accountId}`}})}resetFormEvent=F(!1);openAccountFormModal(){this.accountForm.open()}closeAccountFormModal(){this.accountForm.close()}onAccountFormSubmit(n){if(!n){this.closeAccountFormModal();return}n.accountId&&this.updateAccount(n.accountId,n)}updateAccount(n,t){this.accountsService.updateAccount(n,t).subscribe({next:e=>{e&&e.accountId&&(this.toastService.success("Account updated successfully!"),this.resetFormEvent.set(!0),this.getAccountDetails(),this.closeAccountFormModal())},error:e=>{console.error("Error updating account:",e)}})}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=S({type:i,selectors:[["app-accounts-main"]],viewQuery:function(t,e){if(t&1&&Q(et,5),t&2){let c;Z(c=K())&&(e.accountForm=c.first)}},decls:38,vars:10,consts:[["accountForm",""],[1,"pb-6","px-4"],[3,"breadcrumbs"],[1,"mt-4","border-b","border-gray-200","pb-5"],[3,"openEditAccountModal","account"],[1,""],[1,"grid","grid-cols-1","sm:grid-cols-1","md:grid-cols-6","lg:grid-cols-6","gap-4","mt-6"],[1,"md:col-span-4","lg:col-span-4"],[1,"grid","grid-cols-1","sm:hidden"],["aria-label","Select a tab",1,"col-start-1","row-start-1","w-full","appearance-none","rounded-md","bg-white","py-2","pr-8","pl-3","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","focus:outline-2","focus:-outline-offset-2","focus:outline-indigo-600","dark:bg-gray-800/50","dark:text-gray-100","dark:outline-white/10","dark:*:bg-gray-800","dark:focus:outline-indigo-500"],["selected",""],["viewBox","0 0 16 16","fill","currentColor","data-slot","icon","aria-hidden","true",1,"pointer-events-none","col-start-1","row-start-1","mr-2","size-5","self-center","justify-self-end","fill-gray-500","dark:fill-gray-400"],["d","M4.22 6.22a.75.75 0 0 1 1.06 0L8 8.94l2.72-2.72a.75.75 0 1 1 1.06 1.06l-3.25 3.25a.75.75 0 0 1-1.06 0L4.22 7.28a.75.75 0 0 1 0-1.06Z","clip-rule","evenodd","fill-rule","evenodd"],[1,"hidden","sm:block"],[1,"flex","space-x-4"],[1,"md:col-span-2","lg:col-span-2"],[3,"contactInfo"],[3,"closeModal","modalId"],[1,"mt-3","text-center","sm:mt-0","sm:text-left"],[1,"mt-2"],[1,"mt-4"],[3,"formSubmit","accountId","resetFormEvent"],[1,"mt-5","sm:mt-4","sm:flex","sm:flex-row-reverse"],["type","button",1,"rounded-md","bg-primary-500/10","px-3","py-2","text-sm","font-medium","text-primary-500","dark:bg-primary-500/20","dark:text-primary-300"],["type","button",1,"rounded-md","px-3","py-2","text-sm","font-medium","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200"],["type","button",1,"rounded-md","bg-primary-500/10","px-3","py-2","text-sm","font-medium","text-primary-500","dark:bg-primary-500/20","dark:text-primary-300",3,"click"],["type","button",1,"rounded-md","px-3","py-2","text-sm","font-medium","text-gray-500","hover:text-gray-700","dark:text-gray-400","dark:hover:text-gray-200",3,"click"],[3,"account","primaryContact"]],template:function(t,e){if(t&1){let c=C();o(0,"div",1),s(1,"app-page-heading",2),o(2,"div",3)(3,"app-account-header-box",4),b("openEditAccountModal",function(){return _(c),A(e.openAccountFormModal())}),a()(),o(4,"div",5)(5,"div",6)(6,"div",7)(7,"div",8)(8,"select",9)(9,"option"),r(10,"My Account"),a(),o(11,"option"),r(12,"Company"),a(),o(13,"option",10),r(14,"Team Members"),a(),o(15,"option"),r(16,"Billing"),a()(),I(),o(17,"svg",11),s(18,"path",12),a()(),T(),o(19,"div",13)(20,"el-tab-group")(21,"el-tab-list",14),M(22,ot,2,1,null,null,$),a(),o(24,"el-tab-panels",5),y(25,it,2,2,"div",5),y(26,at,2,0,"div"),y(27,rt,2,0,"div"),y(28,lt,2,0,"div"),a()()()(),o(29,"div",15),s(30,"app-contact-info-box",16),a()()()(),o(31,"app-modal-medium",17,0),b("closeModal",function(){return _(c),A(e.closeAccountFormModal())}),o(33,"div",18),s(34,"div",19),o(35,"div",20)(36,"app-account-form",21),b("formSubmit",function(v){return _(c),A(e.onAccountFormSubmit(v))}),a()()(),s(37,"div",22),a()}t&2&&(l(),m("breadcrumbs",e.pageBreadcrumbs),l(2),m("account",e.account),l(19),N(e.tabs()),l(3),x(e.activeTabIndex()===0?25:-1),l(),x(e.activeTabIndex()===1?26:-1),l(),x(e.activeTabIndex()===2?27:-1),l(),x(e.activeTabIndex()===3?28:-1),l(2),m("contactInfo",e.primaryContact||null),l(),m("modalId","account-form-modal"),l(5),m("accountId",e.accountId)("resetFormEvent",e.resetFormEvent()))},dependencies:[re,pe,w,ge,Me,le,P],encapsulation:2})};var In=[{path:"list",component:ue},{path:":id",component:ye}];export{In as ACCOUNTS_ROUTES};
