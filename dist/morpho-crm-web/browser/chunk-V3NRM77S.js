import{a as oe,b as me}from"./chunk-E5XKEGGR.js";import"./chunk-XUUMAHLE.js";import{a as R}from"./chunk-GK3J37A3.js";import"./chunk-VCNEJXGR.js";import{a as re,b as le,c as ne,e as se}from"./chunk-DZ2SWEVM.js";import"./chunk-J65LRALL.js";import{a as de}from"./chunk-Q7BWANAG.js";import{a as ie}from"./chunk-VIJ5AVWV.js";import{a as te}from"./chunk-ZZ24IKKX.js";import{a as ae}from"./chunk-IFSTEAGB.js";import{a as N}from"./chunk-62CHZGYY.js";import"./chunk-BYXBJQAS.js";import"./chunk-T4HB4AXC.js";import{e as X,f as k,g as F,q as Y,w as ee}from"./chunk-YMK4QOIO.js";import{$ as f,Ab as A,Cb as Z,Db as d,Eb as v,Fb as u,Hb as J,Pa as S,Tb as I,Ub as K,V as h,Vb as _,_ as g,aa as H,ba as G,bb as x,cb as w,db as E,eb as D,fb as C,gb as p,hb as n,ia as B,ib as l,jb as c,kb as m,la as O,lb as o,mb as U,pb as j,tb as b,vb as V,wa as W,yb as T,za as i,zb as M}from"./chunk-MI4VSIZJ.js";function ce(r,t){r&1&&(m(0,"tr")(1,"td",8),d(2," No interactions found. "),o()())}function ge(r,t){if(r&1&&(m(0,"tr",7)(1,"td",9)(2,"div",10),d(3),o(),m(4,"div",11),d(5),o()(),m(6,"td",12),d(7),o(),m(8,"td",13),d(9),I(10,"date"),o()()),r&2){let a=t.$implicit;i(3),v(a.interactionType.interactionTypeName),i(2),v(a.notes),i(2),u(" ",(a.createdByUser==null?null:a.createdByUser.fullName)||""),i(2),u(" ",_(10,4,a.createdAt,"short"))}}var P=class r{leadService=h(N);userService=h(R);lead=null;leadId=null;refreshTrigger=0;leadInteractions=[];ngOnInit(){this.loadLeadInteractions()}ngOnChanges(t){t.refreshTrigger&&!t.refreshTrigger.firstChange&&this.loadLeadInteractions()}loadLeadInteractions(){this.leadId&&this.leadService.getLeadInteractions(this.leadId,!0).subscribe(t=>{this.leadInteractions=t})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=S({type:r,selectors:[["app-lead-interactions-table"]],inputs:{lead:"lead",leadId:"leadId",refreshTrigger:"refreshTrigger"},features:[O],decls:19,vars:1,consts:[[1,""],[1,"w-full","text-left","text-sm/6","whitespace-nowrap"],[1,"w-full"],[1,"border-b","border-gray-200","text-gray-900","dark:border-white/15","dark:text-white"],["scope","col",1,"sticky","px-0","py-3","font-semibold"],["scope","col",1,"sticky","py-3","pr-0","pl-8","text-right","font-semibold","sm:table-cell"],["scope","col",1,"sticky","py-3","pr-0","pl-8","text-right","font-semibold"],[1,"border-b","border-gray-100","dark:border-white/10"],["colspan","3",1,"py-8","text-center","text-gray-500","dark:text-gray-400"],[1,"max-w-0","px-0","py-5","align-top"],[1,"truncate","font-medium","text-gray-900","dark:text-white"],[1,"truncate","text-gray-500","dark:text-gray-400"],[1,"hidden","py-5","pr-0","pl-8","text-right","align-top","text-gray-700","tabular-nums","sm:table-cell","dark:text-gray-300"],[1,"py-5","pr-0","pl-8","text-right","align-top","text-gray-700","tabular-nums","dark:text-gray-300"]],template:function(a,e){a&1&&(m(0,"div",0)(1,"table",1)(2,"colgroup"),U(3,"col",2)(4,"col")(5,"col")(6,"col"),o(),m(7,"thead",3)(8,"tr")(9,"th",4),d(10,"Interaction"),o(),m(11,"th",5),d(12,"Interacted By"),o(),m(13,"th",6),d(14,"Time"),o()()(),m(15,"tbody",0),x(16,ce,3,0,"tr"),D(17,ge,11,7,"tr",7,E),o()()()),a&2&&(i(16),w(!e.leadInteractions||e.leadInteractions.length===0?16:-1),i(),C(e.leadInteractions))},dependencies:[F,k],encapsulation:2})};function fe(r,t){r&1&&(m(0,"li",1),d(1," No logs to display. "),o())}function he(r,t){if(r&1&&(m(0,"li",2)(1,"div",3),U(2,"div",4),o(),m(3,"div",5),U(4,"div",6),o(),m(5,"p",7)(6,"span",8),d(7),o(),d(8),I(9,"lowercase"),o(),m(10,"time",9),d(11),I(12,"date"),o()()),r&2){let a=t.$implicit,e=V();i(7),v(e.formatFullName(a.changeByUser)),i(),u(" ",K(9,3,a.logMessage)),i(3),u(" ",_(12,5,a.changedAt,"short")," ")}}var Q=class r{leadService=h(N);userService=h(R);leadId=null;refreshTrigger=0;leadLogs=[];ngOnInit(){this.loadLeadLogs()}ngOnChanges(t){t.refreshTrigger&&!t.refreshTrigger.firstChange&&this.loadLeadLogs()}loadLeadLogs(){this.leadId&&this.leadService.getLeadLogs(this.leadId,!0).subscribe(t=>{this.leadLogs=t})}formatFullName(t){return`${t?.firstName||""} ${t?.lastName||""}`.trim()}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=S({type:r,selectors:[["app-lead-logs-timeline"]],inputs:{leadId:"leadId",refreshTrigger:"refreshTrigger"},features:[O],decls:5,vars:1,consts:[["role","list",1,"mt-6","space-y-6","max-h-[500px]","overflow-y-auto","px-2"],[1,"text-center","text-gray-400","dark:text-gray-500","py-8"],[1,"relative","flex","gap-x-4"],[1,"absolute","top-0","-bottom-6","left-0","flex","w-6","justify-center"],[1,"w-px","bg-gray-200","dark:bg-white/10"],[1,"relative","flex","size-6","flex-none","items-center","justify-center","bg-white","dark:bg-gray-900"],[1,"size-1.5","rounded-full","bg-gray-100","ring-1","ring-gray-300","dark:bg-white/10","dark:ring-white/20"],[1,"flex-auto","py-0.5","text-xs/5","text-gray-500","dark:text-gray-400"],[1,"font-medium","text-gray-900","dark:text-white"],["datetime","2023-01-23T10:32",1,"flex-none","py-0.5","text-xs/5","text-gray-500","dark:text-gray-400"]],template:function(a,e){a&1&&(m(0,"div")(1,"ul",0),x(2,fe,2,0,"li",1),D(3,he,13,8,"li",2,E),o()()),a&2&&(i(2),w(!e.leadLogs||e.leadLogs.length===0?2:-1),i(),C(e.leadLogs))},dependencies:[F,X,k],encapsulation:2})};var $=class r{status="New";get badgeClasses(){return se(this.status)}get statusText(){return this.status}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=S({type:r,selectors:[["app-lead-status-badge"]],inputs:{status:"status"},decls:2,vars:3,consts:[[1,"inline-flex","items-center","rounded-full","px-2","py-1","text-xs","font-medium","inset-ring"]],template:function(a,e){a&1&&(m(0,"span",0),d(1),o()),a&2&&(Z(e.badgeClasses),i(),u(" ",e.statusText,`
`))},encapsulation:2})};var ve=["leadUpdateFormModal"],Le=["leadAddressUpdateFormModal"],ye=["leadStatusChangeModal"],be=["leadConversionReviewModal"],Se=["leadInteractionModal"];function xe(r,t){if(r&1&&c(0,"app-lead-status-badge",13),r&2){let a=V();p("status",a.leadDetails.leadStatus)}}function we(r,t){if(r&1){let a=j();n(0,"button",48),b("click",function(){let s=g(a).$implicit;return f(s.handler())}),d(1),l()}if(r&2){let a=t.$implicit;i(),u(" ",a.label," ")}}function Ie(r,t){if(r&1&&(n(0,"span",29),d(1),l(),c(2,"br"),d(3),c(4,"br"),d(5),c(6,"br"),d(7)),r&2){let a=V();i(),v(a.leadAddressDetails.addressLine1),i(2),u(" ",a.leadAddressDetails.addressLine2),i(2),J(" ",a.leadAddressDetails.city,", ",a.leadAddressDetails.state," ",a.leadAddressDetails.postalCode),i(2),u(" ",a.leadAddressDetails.country," ")}}function _e(r,t){r&1&&(n(0,"span",25),d(1,"No address available"),l())}function Ee(r,t){r&1&&d(0," Update location? ")}function De(r,t){r&1&&d(0," Add location? ")}var ue=class r{leadUpdateFormModal;leadAddressUpdateFormModal;leadStatusChangeModal;leadConversionReviewModal;leadInteractionModal;router=h(Y);leadsService=h(N);toastService=h(ee);leadsInteractionMasterService=h(ie);pageBreadcrumbs=[{label:"Home",path:"/"},{label:"Leads",path:"/leads"},{label:"#",path:"/leads/#"}];leadId=null;leadDetails=null;leadAddressDetails=null;leadSources;leadStatuses;isLoading=B(!1);leadActivityLogRefreshTrigger=B(0);leadQuickActions=[{label:"Edit Lead",handler:()=>{this.openLeadUpdateFormModal()}},{label:"Update Status",handler:()=>{this.openLeadStatusChangeDialog()}},{label:"Convert Lead",handler:()=>{}}];leadInteractionTypes=[];ngOnInit(){this.loadLeadInteractionTypes();let t=this.router.url.split("/");this.leadId=t[t.length-1],this.leadId||(this.toastService.error("Could not find the specified lead."),this.router.navigate(["/leads"])),this.pageBreadcrumbs[2].label=this.leadId,this.pageBreadcrumbs[2].path=`/leads/${this.leadId}`,this.getLeadStatuses(),this.getLeadSources(),this.fetchLeadDetails()}ngOnDestroy(){}getLeadStatuses(){this.leadsService.getLeadsLookupData().subscribe({next:t=>{this.leadStatuses=t.leadStatuses.map(a=>({label:a.label,value:a.value}))},error:t=>{console.error("Error fetching lead statuses:",t)}})}getLeadSources(){this.leadsService.getLeadSources().subscribe({next:t=>{this.leadSources=t}})}fetchLeadDetails(){this.leadId&&(this.leadsService.getLeadById(this.leadId,!0).subscribe({next:t=>{t&&(this.leadDetails=t)},error:t=>{console.error("Unexpected error:",t),this.toastService.error("An unexpected error occurred.")}}),this.fetchLeadAddressDetails())}fetchLeadAddressDetails(){this.leadId&&this.leadsService.getLeadAddress(this.leadId).subscribe({next:t=>{this.leadAddressDetails=t},error:t=>{console.error("Error fetching lead address details:",t),this.toastService.error("Failed to load lead address details.")}})}loadLeadInteractionTypes(){this.leadsInteractionMasterService.getLeadInteractionTypes().subscribe(t=>{this.leadInteractionTypes=t})}openLeadUpdateFormModal(){this.leadUpdateFormModal.open()}closeLeadUpdateFormModal(){this.leadUpdateFormModal.close()}onLeadUpdateSubmit(t){let a=t.data;if(!a){this.closeLeadUpdateFormModal();return}a.leadId&&this.updateLead(a)}updateLead(t){let a={leadId:t.leadId,leadOwnerId:t.leadOwnerId||void 0,leadOwnerName:t.leadOwnerName||void 0,leadSourceId:t.leadSourceId||void 0,leadStatus:t.leadStatus||void 0,leadTopic:t.leadTopic||void 0,leadConversionDate:t.leadConversionDate||void 0,firstName:t.firstName||void 0,lastName:t.lastName||void 0,phone:t.phoneNumber||void 0,email:t.email||void 0,companyName:t.companyName||void 0};this.leadsService.updateLead(a).subscribe({next:e=>{this.isLoading.set(!1),e&&e.leadId&&(this.toastService.success("Lead updated successfully"),this.closeLeadUpdateFormModal(),this.fetchLeadDetails())},error:e=>{this.isLoading.set(!1),console.error("Error updating lead:",e)}})}openLeadAddressUpdateFormModal(){this.leadAddressUpdateFormModal.open()}closeLeadAddressUpdateFormModal(){this.leadAddressUpdateFormModal.close()}onLeadAddressUpdateSubmit(t){console.log("Lead address form submitted with data:",t);let a=t.data;if(!a){this.closeLeadAddressUpdateFormModal();return}a.addressId?this.updateLeadAddress(a):this.createLeadAddress(a)}updateLeadAddress(t){let a={addressId:this.leadAddressDetails?.addressId,addressLine1:t.addressLine1||void 0,addressLine2:t.addressLine2||void 0,city:t.city||void 0,state:t.state||void 0,postalCode:t.postalCode||void 0,leadId:this.leadDetails?.leadId,country:t.country||void 0,isPrimary:t.isPrimary};this.leadsService.updateLeadAddress(this.leadDetails?.leadId,a).subscribe({next:e=>{this.isLoading.set(!1),e&&e.addressId&&(this.toastService.success("Lead address updated successfully"),this.closeLeadAddressUpdateFormModal(),this.fetchLeadDetails())},error:e=>{this.isLoading.set(!1),console.error("Error updating lead address:",e)}})}createLeadAddress(t){let a={addressLine1:t.addressLine1||void 0,addressLine2:t.addressLine2||void 0,city:t.city||void 0,state:t.state||void 0,postalCode:t.postalCode||void 0,leadId:this.leadDetails?.leadId,country:t.country||void 0,isPrimary:!0};this.leadsService.createLeadAddress(this.leadDetails?.leadId,a).subscribe({next:e=>{this.isLoading.set(!1),e&&e.addressId&&(console.log("Lead address created successfully:",e),this.toastService.success("Lead address created successfully"),this.closeLeadAddressUpdateFormModal(),this.fetchLeadDetails())},error:e=>{this.isLoading.set(!1),console.error("Error creating lead address:",e)}})}openLeadStatusChangeDialog(){this.leadStatusChangeModal.open()}closeLeadStatusChangeDialog(){this.leadStatusChangeModal.close()}handleLeadStatusUpdate(t){if(!this.leadDetails){this.toastService.error("No lead selected for status update.");return}if(!t){this.toastService.error("Please select a valid status.");return}this.leadsService.updateLeadStatus(this.leadDetails.leadId,t).subscribe({next:a=>{if(a&&a.leadId){this.closeLeadStatusChangeDialog(),this.fetchLeadDetails(),this.leadActivityLogRefreshTrigger.set(this.leadActivityLogRefreshTrigger()+1);return}},error:a=>{console.error("Error updating lead status:",a)}})}openLeadConversionReviewModal(){this.leadConversionReviewModal.open()}closeLeadConversionReviewModal(){this.leadConversionReviewModal.close()}onLeadConversionSubmit(t){}interactionRefreshTrigger=B(0);openLeadInteractionModal(){this.leadInteractionModal.open()}closeLeadInteractionModal(){this.leadInteractionModal.close()}onInteractionSubmit(t){if(!this.leadDetails){this.toastService.error("No lead selected for adding interaction.");return}this.leadsService.createLeadInteraction(this.leadDetails?.leadId,t).subscribe({next:a=>{if(a.interactionId){this.toastService.success("Lead interaction created successfully."),this.interactionRefreshTrigger.set(this.interactionRefreshTrigger()+1),this.leadActivityLogRefreshTrigger.set(this.leadActivityLogRefreshTrigger()+1),this.closeLeadInteractionModal();return}this.toastService.error("Failed to create lead interaction. Please try again later.")},error:a=>{console.error("Error creating lead interaction:",a)}})}static \u0275fac=function(a){return new(a||r)};static \u0275cmp=S({type:r,selectors:[["app-lead-detail-view"]],viewQuery:function(a,e){if(a&1&&(T(ve,5),T(Le,5),T(ye,5),T(be,5),T(Se,5)),a&2){let s;M(s=A())&&(e.leadUpdateFormModal=s.first),M(s=A())&&(e.leadAddressUpdateFormModal=s.first),M(s=A())&&(e.leadStatusChangeModal=s.first),M(s=A())&&(e.leadConversionReviewModal=s.first),M(s=A())&&(e.leadInteractionModal=s.first)}},inputs:{leadId:"leadId"},decls:94,vars:48,consts:[["leadUpdateFormModal",""],["leadAddressUpdateFormModal",""],["leadStatusChangeModal",""],["leadConversionReviewModal",""],["leadInteractionModal",""],[1,""],["description","Complete details and information about the lead captured.",3,"title","breadcrumbs"],[1,"px-4","py-8","sm:px-6","lg:px-4"],[1,"mx-auto","grid","max-w-2xl","grid-cols-1","grid-rows-1","items-start","gap-x-8","gap-y-8","lg:mx-0","lg:max-w-none","lg:grid-cols-3"],[1,"-mx-4","px-4","py-8","shadow-xs","ring-1","ring-gray-900/5","sm:mx-0","sm:rounded-lg","sm:px-8","sm:pb-14","lg:col-span-2","lg:row-span-2","lg:row-end-2","xl:px-8","xl:pt-8","xl:pb-10","dark:shadow-none","dark:ring-white/10"],[1,"flex","justify-between","items-center"],[1,"flex","items-center","gap-3","mb-4"],[1,"text-base","font-semibold","text-gray-900","dark:text-white"],[3,"status"],[1,"inline-block"],[1,"inline-flex","w-full","justify-center","gap-x-1.5","rounded-md","bg-white","px-2","py-1","text-sm","font-semibold","text-gray-900","shadow-xs","inset-ring-1","inset-ring-gray-300","hover:bg-gray-50","dark:bg-white/10","dark:text-white","dark:shadow-none","dark:inset-ring-white/5","dark:hover:bg-white/20"],["viewBox","0 0 20 20","fill","currentColor","data-slot","icon","aria-hidden","true",1,"-mr-1","size-5","text-gray-400"],["d","M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z","clip-rule","evenodd","fill-rule","evenodd"],["anchor","bottom end","popover","",1,"w-56","origin-top-right","rounded-md","bg-white","shadow-lg","outline-1","outline-black/5","transition","transition-discrete","[--anchor-gap:--spacing(2)]","data-closed:scale-95","data-closed:transform","data-closed:opacity-0","data-enter:duration-100","data-enter:ease-out","data-leave:duration-75","data-leave:ease-in","dark:bg-gray-800","dark:shadow-none","dark:-outline-offset-1","dark:outline-white/10"],[1,"py-1"],["type","button",1,"block","w-full","px-4","py-2","text-left","text-sm","text-gray-700","focus:bg-gray-100","focus:text-gray-900","focus:outline-hidden","dark:text-gray-300","dark:focus:bg-white/5","dark:focus:text-white"],[1,"grid","grid-cols-1","text-sm/6","sm:grid-cols-2","2xl:grid-cols-3"],[1,"mt-6","border-gray-900/5","pt-6","sm:pr-4","dark:border-white/10"],[1,"font-semibold","text-gray-900","dark:text-white"],[1,"mt-2","text-gray-500","dark:text-gray-400"],[1,"italic","text-gray-400"],[1,"flex","justify-start","text-xs","font-medium","text-primary-500","hover:underline","hover:text-primary-500/80","focus:outline-none",3,"click"],[1,"mt-8","sm:mt-6","sm:border-gray-900/5","sm:pt-6","sm:pl-4","dark:sm:border-white/10"],[1,"font-medium","text-gray-900","dark:text-white",3,"href"],[1,"font-medium","text-gray-900","dark:text-white"],[1,"mt-10"],[1,"flex","justify-end","text-xs","font-medium","text-primary-500","hover:underline","hover:text-primary-500/80","focus:outline-none",3,"click"],[1,"px-2","pb-2"],[3,"leadId","refreshTrigger"],[1,"lg:col-start-3","lg:row-end-1"],[1,"ml-2","text-sm/6","font-semibold","text-gray-900","dark:text-white"],[3,"modalId"],[3,"formSubmit","formCancel","isEditMode","leadId","leadStatusOptions","leadSourceOptions","showNextButton","showSaveAndExitButton","saveButtonText"],[3,"submitAddress","cancelAddress","setLeadId","isEditMode","isLoading","saveButtonText","saveAndExitButtonText","showNextButton","showSaveAndExitButton"],[3,"statusChange","cancel","lead","leadStatusOptions"],[1,"mt-3","text-center","sm:mt-0","sm:text-left"],["id","dialog-title",1,"text-base","font-semibold","text-gray-900","dark:text-white"],[1,"mt-2"],[1,"text-sm","text-gray-500","dark:text-gray-400"],[1,"mt-4"],[3,"formSubmit","leadId"],[1,"mt-5","sm:mt-4","sm:flex","sm:flex-row-reverse"],[3,"interactionSubmit","leadId","leadInteractionTypes"],["type","button",1,"block","w-full","px-4","py-2","text-left","text-sm","text-gray-700","focus:bg-gray-100","focus:text-gray-900","focus:outline-hidden","dark:text-gray-300","dark:focus:bg-white/5","dark:focus:text-white",3,"click"]],template:function(a,e){if(a&1){let s=j();n(0,"main")(1,"div",5),c(2,"app-page-heading",6),l(),n(3,"div",7)(4,"div",8)(5,"div",9)(6,"div",10)(7,"div",11)(8,"h2",12),d(9),l(),x(10,xe,1,1,"app-lead-status-badge",13),l(),n(11,"div")(12,"el-dropdown",14)(13,"button",15),d(14," Quick Actions "),H(),n(15,"svg",16),c(16,"path",17),l()(),G(),n(17,"el-menu",18)(18,"div",19),D(19,we,2,1,"button",20,E),l()()()()(),n(21,"dl",21)(22,"div",22)(23,"dt",23),d(24,"Location"),l(),n(25,"dd",24),x(26,Ie,8,6)(27,_e,2,0,"span",25),l(),n(28,"a",26),b("click",function(){return g(s),f(e.openLeadAddressUpdateFormModal())}),x(29,Ee,1,0)(30,De,1,0),l()(),n(31,"div",27)(32,"dt",23),d(33,"Contact"),l(),n(34,"dd",24)(35,"a",28),d(36),l(),c(37,"br"),d(38),c(39,"br"),d(40),l()(),n(41,"div",27)(42,"dt",23),d(43,"Owner"),l(),n(44,"dd",24)(45,"a",29),d(46),l(),c(47,"br"),d(48),I(49,"date"),c(50,"br"),d(51),I(52,"date"),c(53,"br"),d(54),l()()(),n(55,"div",30)(56,"a",31),b("click",function(){return g(s),f(e.openLeadInteractionModal())}),d(57," Add New Interaction?"),l(),n(58,"div",32),c(59,"app-lead-interactions-table",33),l()()(),n(60,"div",34)(61,"h2",35),d(62,"Activity Timeline"),l(),c(63,"app-lead-logs-timeline",33),l()()()(),n(64,"app-modal-medium",36,0)(66,"app-lead-form",37),b("formSubmit",function(y){return g(s),f(e.onLeadUpdateSubmit(y))})("formCancel",function(){return g(s),f(e.closeLeadUpdateFormModal())}),l()(),n(67,"app-modal-medium",36,1)(69,"app-lead-address-form",38),b("submitAddress",function(y){return g(s),f(e.onLeadAddressUpdateSubmit(y))})("cancelAddress",function(){return g(s),f(e.closeLeadAddressUpdateFormModal())}),l()(),n(70,"app-modal-small",36,2)(72,"app-lead-status-change-box",39),b("statusChange",function(y){return g(s),f(e.handleLeadStatusUpdate(y))})("cancel",function(){return g(s),f(e.closeLeadStatusChangeDialog())}),l()(),n(73,"app-modal-medium",36,3)(75,"div",40)(76,"h3",41),d(77,"Lead Conversion Review"),l(),n(78,"div",42)(79,"p",43),d(80,"Review lead details before converting to opportunity: "),l()(),n(81,"div",44)(82,"app-lead-conversion-review",45),b("formSubmit",function(y){return g(s),f(e.onLeadConversionSubmit(y))}),l()()(),c(83,"div",46),l(),n(84,"app-modal-small",36,4)(86,"div",40)(87,"h3",41),d(88,"Create Interaction"),l(),n(89,"div",42)(90,"p",43),d(91,"Fill in the details for the interaction:"),l()(),n(92,"div",42)(93,"app-lead-interaction-form",47),b("interactionSubmit",function(y){return g(s),f(e.onInteractionSubmit(y))}),l()()()()}a&2&&(i(2),p("title","Lead Summary")("breadcrumbs",e.pageBreadcrumbs),i(7),u("",e.leadDetails==null?null:e.leadDetails.leadTopic," "),i(),w(e.leadDetails!=null&&e.leadDetails.leadStatus?10:-1),i(9),C(e.leadQuickActions),i(7),w(e.leadAddressDetails!=null?26:27),i(3),w(e.leadAddressDetails!=null?29:30),i(6),p("href","mailto:"+(e.leadDetails==null?null:e.leadDetails.email),W),i(),v(e.leadDetails==null?null:e.leadDetails.firstName),i(2),v((e.leadDetails!=null&&e.leadDetails.email?e.leadDetails==null?null:e.leadDetails.email:"N/A")+" (email)"),i(2),u(" ",(e.leadDetails!=null&&e.leadDetails.phone?e.leadDetails==null?null:e.leadDetails.phone:"N/A")+" (phone)"," "),i(6),v((e.leadDetails==null||e.leadDetails.leadOwner==null?null:e.leadDetails.leadOwner.firstName)+(!(e.leadDetails==null||e.leadDetails.leadOwner==null)&&e.leadDetails.leadOwner.lastName?" "+(e.leadDetails==null||e.leadDetails.leadOwner==null?null:e.leadDetails.leadOwner.lastName):"")),i(2),u("",e.leadDetails!=null&&e.leadDetails.createdAt?`Created On ${_(49,42,e.leadDetails==null?null:e.leadDetails.createdAt,"mediumDate")}`:"N/A"," "),i(3),v(e.leadDetails!=null&&e.leadDetails.convertedAt?`Converted On ${_(52,45,e.leadDetails==null?null:e.leadDetails.convertedAt,"mediumDate")}`:"N/A"),i(3),u(" ",!(e.leadDetails==null||e.leadDetails.leadSource==null)&&e.leadDetails.leadSource.sourceName?`Obtained through ${e.leadDetails==null||e.leadDetails.leadSource==null?null:e.leadDetails.leadSource.sourceName}`:"Unknown source"," "),i(5),p("leadId",e.leadId)("refreshTrigger",e.interactionRefreshTrigger()),i(4),p("leadId",e.leadId)("refreshTrigger",e.leadActivityLogRefreshTrigger()),i(),p("modalId","lead-form-modal"),i(2),p("isEditMode",!0)("leadId",e.leadId||null)("leadStatusOptions",e.leadStatuses)("leadSourceOptions",e.leadSources)("showNextButton",!0)("showSaveAndExitButton",!1)("saveButtonText","Save"),i(),p("modalId","lead-address-form-modal"),i(2),p("setLeadId",e.leadId)("isEditMode",!0)("isLoading",e.isLoading())("saveButtonText","save")("saveAndExitButtonText","save and exit")("showNextButton",!0)("showSaveAndExitButton",!1),i(),p("modalId","lead-status-change-modal"),i(2),p("lead",e.leadDetails)("leadStatusOptions",e.leadStatuses),i(),p("modalId","lead-conversion-review-modal"),i(9),p("leadId",(e.leadDetails==null?null:e.leadDetails.leadId)||null),i(2),p("modalId","lead-interaction-modal"),i(9),p("leadId",(e.leadDetails==null?null:e.leadDetails.leadId)||"")("leadInteractionTypes",e.leadInteractionTypes))},dependencies:[F,ae,Q,P,me,$,de,te,ne,re,le,oe,k],encapsulation:2})};export{ue as LeadDetailView};
