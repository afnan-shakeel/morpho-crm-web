import{a as X}from"./chunk-ICXQ7NUM.js";import{a as Z}from"./chunk-WF3HQLNG.js";import{a as te}from"./chunk-7ZKBBVPW.js";import{a as $}from"./chunk-4ZAQMZ6A.js";import{a as ee}from"./chunk-UY4LSRMA.js";import"./chunk-T4HB4AXC.js";import{C as x,D as E,E as w,F as N,H as D,K as k,M as A,S as R,U as V,g as J,v as K,w as M,x as W}from"./chunk-XICAGMBR.js";import{$ as p,A as g,Ab as H,Db as l,Ea as T,Eb as F,Fb as Y,Pa as S,Q,V as c,_ as m,bb as C,cb as _,gb as d,hb as r,ib as i,jb as y,la as v,o as h,pb as z,s as I,tb as u,vb as b,yb as B,za as s,zb as j}from"./chunk-MI4VSIZJ.js";var U=class n{fb=c(R);interactionTypeId=null;leadInteractionTypeData=null;isEditMode=!1;formTitle="Create Lead Interaction Type";formSubmit=new T;formCancel=new T;ngOnChanges(e){e.interactionTypeId&&this.interactionTypeId&&this.populateForm(this.interactionTypeId)}populateForm(e){this.leadInteractionTypeData&&this.leadInteractionTypeForm.patchValue({interactionTypeName:this.leadInteractionTypeData.interactionTypeName})}leadInteractionTypeForm=this.fb.group({interactionTypeName:["",E.required],isActive:[!0]});onSubmit(){this.leadInteractionTypeForm.valid&&(this.formSubmit.emit({interactionTypeName:this.leadInteractionTypeForm.value.interactionTypeName}),this.leadInteractionTypeForm.reset())}onCancel(){this.formCancel.emit(),this.leadInteractionTypeForm.reset()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-leads-interaction-types-form"]],inputs:{interactionTypeId:"interactionTypeId",leadInteractionTypeData:"leadInteractionTypeData",isEditMode:"isEditMode",formTitle:"formTitle"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[v],decls:16,vars:2,consts:[[3,"ngSubmit","formGroup"],[1,"text-base/7","font-semibold","text-gray-900","dark:text-white"],[1,"mt-1","text-sm/6","text-gray-600","dark:text-gray-400"],[1,"mt-4"],["for","interactionTypeName",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"mt-2"],["id","interactionTypeName","type","text","formControlName","interactionTypeName","placeholder","Enter interaction type name",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"mt-6","flex","items-center","justify-end","gap-x-6"],["type","button",1,"text-sm/6","font-semibold","text-gray-900","dark:text-white",3,"click"],["type","submit",1,"rounded-md","bg-primary-500","px-3","py-2","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-600","dark:bg-primary-500","dark:shadow-none","dark:focus-visible:outline-primary-500"]],template:function(t,a){t&1&&(r(0,"form",0),u("ngSubmit",function(){return a.onSubmit()}),r(1,"h2",1),l(2),i(),r(3,"p",2),l(4,"A unique interaction type for leads activities. "),i(),r(5,"div",3)(6,"div")(7,"label",4),l(8,"Interaction Type Name"),i(),r(9,"div",5),y(10,"input",6),i()()(),r(11,"div",7)(12,"button",8),u("click",function(){return a.onCancel()}),l(13,"Cancel"),i(),r(14,"button",9),l(15,"Save"),i()()()),t&2&&(d("formGroup",a.leadInteractionTypeForm),s(2),F(a.formTitle))},dependencies:[V,D,x,w,N,k,A],encapsulation:2})};function oe(n,e){if(n&1&&(r(0,"div",7),l(1),i()),n&2){let t,a=b();s(),Y(" ",!((t=a.leadsSourceForm.get("sourceName"))==null||t.errors==null)&&t.errors.required?"Source name is required.":""," ")}}var O=class n{fb=c(R);sourceId=null;leadSourceData=null;isEditMode=!1;formTitle="Create Lead Source";formSubmit=new T;formCancel=new T;ngOnChanges(e){e.sourceId&&this.sourceId&&this.populateForm(this.sourceId)}populateForm(e){this.leadSourceData&&this.leadsSourceForm.patchValue({sourceName:this.leadSourceData.sourceName,isActive:this.leadSourceData.isActive})}leadsSourceForm=this.fb.group({sourceName:["",E.required],isActive:[!0]});onSubmit(){this.leadsSourceForm.markAllAsTouched(),this.leadsSourceForm.valid&&(this.formSubmit.emit({sourceName:this.leadsSourceForm.value.sourceName,isActive:this.leadsSourceForm.value.isActive}),this.leadsSourceForm.reset({isActive:!0}))}onCancel(){this.formCancel.emit(),this.leadsSourceForm.reset({isActive:!0})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-leads-source-form"]],inputs:{sourceId:"sourceId",leadSourceData:"leadSourceData",isEditMode:"isEditMode",formTitle:"formTitle"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[v],decls:17,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"text-base/7","font-semibold","text-gray-900","dark:text-white"],[1,"mt-1","text-sm/6","text-gray-600","dark:text-gray-400"],[1,"mt-4"],["for","sourceName",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"mt-2"],["id","sourceName","type","text","formControlName","sourceName","placeholder","Enter source name",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"mt-1","text-xs","text-red-600","dark:text-red-400"],[1,"mt-6","flex","items-center","justify-end","gap-x-6"],["type","button",1,"text-sm/6","font-semibold","text-gray-900","dark:text-white",3,"click"],["type","submit",1,"rounded-md","bg-primary-500","px-3","py-2","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-600","dark:bg-primary-500","dark:shadow-none","dark:focus-visible:outline-primary-500"]],template:function(t,a){if(t&1&&(r(0,"form",0),u("ngSubmit",function(){return a.onSubmit()}),r(1,"h2",1),l(2),i(),r(3,"p",2),l(4,"A unique source from which leads are generated. "),i(),r(5,"div",3)(6,"div")(7,"label",4),l(8,"Source Name"),i(),r(9,"div",5),y(10,"input",6),i(),C(11,oe,2,1,"div",7),i()(),r(12,"div",8)(13,"button",9),u("click",function(){return a.onCancel()}),l(14,"Cancel"),i(),r(15,"button",10),l(16,"Save"),i()()()),t&2){let o;d("formGroup",a.leadsSourceForm),s(2),F(a.formTitle),s(9),_((o=a.leadsSourceForm.get("sourceName"))!=null&&o.invalid&&((o=a.leadsSourceForm.get("sourceName"))!=null&&o.dirty||(o=a.leadsSourceForm.get("sourceName"))!=null&&o.touched)?11:-1)}},dependencies:[V,D,x,w,N,k,A],encapsulation:2})};var q=class n{api=c(K);toastService=c(M);errorHandler=c(W);getLeadSources(){return this.api.get("leads/sources").pipe(g(e=>(this.errorHandler.handleError(e),h([]))),I(e=>e.data))}createLeadSource(e){return this.api.post("leads/sources/create",e).pipe(g(t=>(this.errorHandler.handleError(t),h(null))),I(t=>t.data))}updateLeadSource(e){return this.api.post("leads/sources/update",e).pipe(g(t=>(this.errorHandler.handleError(t),h(null))),I(t=>t.data))}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Q({token:n,factory:n.\u0275fac,providedIn:"root"})};var ie=["leadSourceFormModal"],ne=["leadInteractionTypeFormModal"];function se(n,e){if(n&1&&(r(0,"div"),y(1,"app-custom-datatable",16),i()),n&2){let t=b();s(),d("records",t.leadSources)("columns",t.leadSourceListColumns)("currentPage",1)("pageSize",t.leadSources.length)("totalRecords",t.leadSources.length)("rowActions",t.leadSourceRowActions)("disableSearch",!0)}}function le(n,e){if(n&1&&(r(0,"div"),y(1,"app-custom-datatable",16),i()),n&2){let t=b();s(),d("records",t.leadInteractionTypes)("columns",t.leadInteractionTypeListColumns)("currentPage",1)("pageSize",t.leadInteractionTypes.length)("totalRecords",t.leadInteractionTypes.length)("rowActions",t.leadInteractionTypeRowActions)("disableSearch",!0)}}var G=class n{toastService=c(M);leadSourceService=c(q);leadInteractionTypeService=c(te);pageBreadcrumbs=[{label:"Home",path:"/"},{label:"Leads Master",path:"/admin/leads-master"}];contentTabs=[{id:"lead-source",label:"Lead Source",active:!0},{id:"lead-interaction-type",label:"Lead Interaction Type"},{id:"lead-status",label:"Lead Status"}];currentContent="lead-source";leadSources=[];leadSourceListColumns=[{field:"sourceId",label:"Source ID",hidden:!0},{field:"sourceName",label:"Source Name"},{field:"isActive",label:"Active",cellTemplate:"color-badge",colorBadgeMapper:{true:"green",false:"red"},valueMapper:{true:"Yes",false:"No"}},{field:"createdAt",label:"Created Time",cellTemplate:"datetime"}];leadSourceRowActions=[{label:"Edit",actionCallback:e=>{this.openLeadSourceFormModal(e)}}];leadInteractionTypes=[];leadInteractionTypeListColumns=[{field:"interactionTypeId",label:"Interaction Type ID",hidden:!0},{field:"interactionTypeName",label:"Interaction Type Name"},{field:"isActive",label:"Active",cellTemplate:"color-badge",colorBadgeMapper:{true:"green",false:"red"},valueMapper:{true:"Yes",false:"No"}},{field:"createdAt",label:"Created Time",cellTemplate:"datetime"}];leadInteractionTypeRowActions=[{label:"Edit",actionCallback:e=>{this.openLeadInteractionTypeFormModal(e)}}];ngOnInit(){this.loadLeadSources()}onContentTabChange(e){this.currentContent=e.tab.id,e.tab.id==="lead-source"?this.loadLeadSources():e.tab.id==="lead-interaction-type"&&this.loadLeadInteractionTypes()}loadLeadSources(){this.leadSourceService.getLeadSources().subscribe(e=>{this.leadSources=e})}loadLeadInteractionTypes(){this.leadInteractionTypeService.getLeadInteractionTypes().subscribe(e=>{this.leadInteractionTypes=e})}onCreateMaster(){this.currentContent==="lead-source"?this.openLeadSourceFormModal():this.currentContent==="lead-interaction-type"?this.openLeadInteractionTypeFormModal():this.currentContent}leadSourceModalTitle="Create Lead Source";selectedLeadSourceToUpdate=null;leadSourceFormModal;openLeadSourceFormModal(e=null){this.selectedLeadSourceToUpdate=e,this.leadSourceModalTitle=e&&e.sourceId?"Update Lead Source":"Create Lead Source",this.leadSourceFormModal.open()}closeLeadSourceFormModal(){this.leadSourceFormModal.close(),this.selectedLeadSourceToUpdate=null}onLeadSourceFormSubmit(e){this.selectedLeadSourceToUpdate&&this.selectedLeadSourceToUpdate.sourceId?this.leadSourceService.updateLeadSource({sourceId:this.selectedLeadSourceToUpdate.sourceId,sourceName:e.sourceName,isActive:e.isActive??!0}).subscribe(t=>{if(t?.sourceId){this.loadLeadSources(),this.closeLeadSourceFormModal(),this.toastService.success("Lead Source updated successfully");return}}):this.leadSourceService.createLeadSource({sourceName:e.sourceName,isActive:e.isActive??!0}).subscribe(t=>{if(t?.sourceId){this.toastService.success("Lead Source created successfully"),this.loadLeadSources(),this.closeLeadSourceFormModal();return}})}onLeadSourceFormCancel(){this.closeLeadSourceFormModal()}leadInteractionTypeFormModal;leadInteractionTypeModalTitle="Create Lead Interaction Type";selectedLeadInteractionTypeToUpdate=null;openLeadInteractionTypeFormModal(e=null){this.selectedLeadInteractionTypeToUpdate=e,this.leadInteractionTypeModalTitle=e&&e.interactionTypeId?"Update Lead Interaction Type":"Create Lead Interaction Type",this.leadInteractionTypeFormModal.open()}closeLeadInteractionTypeFormModal(){this.leadInteractionTypeFormModal.close(),this.selectedLeadInteractionTypeToUpdate=null}onLeadInteractionTypeFormSubmit(e){this.selectedLeadInteractionTypeToUpdate&&this.selectedLeadInteractionTypeToUpdate.interactionTypeId?this.leadInteractionTypeService.updateLeadInteractionType(this.selectedLeadInteractionTypeToUpdate.interactionTypeId,{interactionTypeName:e.interactionTypeName}).subscribe(t=>{if(t?.interactionTypeId){this.loadLeadInteractionTypes(),this.closeLeadInteractionTypeFormModal(),this.toastService.success("Lead Interaction Type updated successfully");return}}):this.leadInteractionTypeService.createLeadInteractionType({interactionTypeName:e.interactionTypeName}).subscribe(t=>{if(t?.interactionTypeId){this.toastService.success("Lead Interaction Type created successfully"),this.loadLeadInteractionTypes(),this.closeLeadInteractionTypeFormModal();return}})}onLeadInteractionTypeFormCancel(){this.closeLeadInteractionTypeFormModal()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=S({type:n,selectors:[["app-leads-master-listing"]],viewQuery:function(t,a){if(t&1&&(B(ie,5),B(ne,5)),t&2){let o;j(o=H())&&(a.leadSourceFormModal=o.first),j(o=H())&&(a.leadInteractionTypeFormModal=o.first)}},decls:19,vars:12,consts:[["leadSourceFormModal",""],["leadInteractionTypeFormModal",""],[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,""],["description","Manage the master list of all leads including their sources and details.",3,"title","breadcrumbs"],[1,"sm:mt-0","sm:ml-16","sm:flex-none"],["type","button",1,"block","rounded-md","bg-primary-500","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-500","dark:bg-primary-500","dark:hover:bg-indigo-400","dark:focus-visible:outline-primary-500",3,"click"],[1,"mt-6"],["mode","content",3,"tabChange","tabs"],[1,"p-2","bg-gray-50/20","dark:bg-gray-800","rounded-lg"],[3,"closeModal","modalId"],[3,"formCancel","formSubmit","formTitle","leadSourceData","sourceId"],[3,"modalId"],[3,"formCancel","formSubmit","formTitle","leadInteractionTypeData","interactionTypeId"],[3,"records","columns","currentPage","pageSize","totalRecords","rowActions","disableSearch"]],template:function(t,a){if(t&1){let o=z();r(0,"div",2)(1,"div",3)(2,"div",4)(3,"div",5),y(4,"app-page-heading",6),i()(),r(5,"div",7)(6,"button",8),u("click",function(){return m(o),p(a.onCreateMaster())}),l(7," Create New Master "),i()()(),r(8,"div",9)(9,"app-tabs",10),u("tabChange",function(L){return m(o),p(a.onContentTabChange(L))}),i(),r(10,"div",11),C(11,se,2,7,"div")(12,le,2,7,"div"),i()()(),r(13,"app-modal-small",12,0),u("closeModal",function(){return m(o),p(a.closeLeadSourceFormModal())}),r(15,"app-leads-source-form",13),u("formCancel",function(){return m(o),p(a.onLeadSourceFormCancel())})("formSubmit",function(L){return m(o),p(a.onLeadSourceFormSubmit(L))}),i()(),r(16,"app-modal-small",14,1)(18,"app-leads-interaction-types-form",15),u("formCancel",function(){return m(o),p(a.onLeadInteractionTypeFormCancel())})("formSubmit",function(L){return m(o),p(a.onLeadInteractionTypeFormSubmit(L))}),i()()}if(t&2){let o;s(4),d("title","Leads Master")("breadcrumbs",a.pageBreadcrumbs),s(5),d("tabs",a.contentTabs),s(2),_((o=a.currentContent)==="lead-source"?11:o==="lead-interaction-type"?12:-1),s(2),d("modalId","lead-source-form-modal"),s(2),d("formTitle",a.leadSourceModalTitle)("leadSourceData",a.selectedLeadSourceToUpdate)("sourceId",(a.selectedLeadSourceToUpdate==null?null:a.selectedLeadSourceToUpdate.sourceId)||null),s(),d("modalId","lead-interaction-type-form-modal"),s(2),d("formTitle",a.leadInteractionTypeModalTitle)("leadInteractionTypeData",a.selectedLeadInteractionTypeToUpdate)("interactionTypeId",(a.selectedLeadInteractionTypeToUpdate==null?null:a.selectedLeadInteractionTypeToUpdate.interactionTypeId)||null)}},dependencies:[ee,Z,X,J,$,O,U],encapsulation:2})};var Ze=[{path:"list",component:G}];export{Ze as LEADS_MASTER_ROUTES};
