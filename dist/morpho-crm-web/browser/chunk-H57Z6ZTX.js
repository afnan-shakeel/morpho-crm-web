import{a as H}from"./chunk-2OWEXERP.js";import{a as P}from"./chunk-ICXQ7NUM.js";import{a as Q}from"./chunk-WF3HQLNG.js";import{a as j}from"./chunk-4ZAQMZ6A.js";import{a as z}from"./chunk-UY4LSRMA.js";import"./chunk-T4HB4AXC.js";import{C as k,D as I,E as V,F as L,H as R,K as O,M as B,S as G,U as q,w as D}from"./chunk-XICAGMBR.js";import{$ as m,Ab as x,Db as y,Ea as C,Eb as w,Fb as N,Pa as T,V as u,_ as p,bb as A,cb as f,gb as l,hb as o,ib as a,jb as d,la as M,pb as S,tb as s,vb as b,yb as F,za as r,zb as E}from"./chunk-MI4VSIZJ.js";function J(n,e){if(n&1&&(o(0,"div",7),y(1),a()),n&2){let t,i=b();r(),N(" ",!((t=i.activityTypeForm.get("activityTypeName"))==null||t.errors==null)&&t.errors.required?"Activity type name is required.":""," ")}}var g=class n{fb=u(G);activityTypeId=null;activityTypeData=null;isEditMode=!1;formTitle="Create Lead Source";formSubmit=new C;formCancel=new C;ngOnChanges(e){e.activityTypeId&&this.activityTypeId&&this.populateForm(this.activityTypeId)}populateForm(e){this.activityTypeData&&this.activityTypeForm.patchValue({activityTypeName:this.activityTypeData.activityTypeName})}activityTypeForm=this.fb.group({activityTypeName:["",I.required]});onSubmit(){this.activityTypeForm.markAllAsTouched(),this.activityTypeForm.valid&&(this.formSubmit.emit({activityTypeName:this.activityTypeForm.value.activityTypeName}),this.activityTypeForm.reset())}onCancel(){this.formCancel.emit(),this.activityTypeForm.reset()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["app-account-activity-type-form"]],inputs:{activityTypeId:"activityTypeId",activityTypeData:"activityTypeData",isEditMode:"isEditMode",formTitle:"formTitle"},outputs:{formSubmit:"formSubmit",formCancel:"formCancel"},features:[M],decls:17,vars:3,consts:[[3,"ngSubmit","formGroup"],[1,"text-base/7","font-semibold","text-gray-900","dark:text-white"],[1,"mt-1","text-sm/6","text-gray-600","dark:text-gray-400"],[1,"mt-4"],["for","activityTypeName",1,"block","text-sm/6","font-medium","text-gray-900","dark:text-white"],[1,"mt-2"],["id","activityTypeName","type","text","formControlName","activityTypeName","placeholder","Enter activity type name",1,"block","w-full","rounded-md","bg-white","px-3","py-1.5","text-base","text-gray-900","outline-1","-outline-offset-1","outline-gray-300","placeholder:text-gray-400","focus:outline-2","focus:-outline-offset-2","focus:outline-primary-600","sm:text-sm/6","dark:bg-white/5","dark:text-white","dark:outline-white/10","dark:placeholder:text-gray-500","dark:focus:outline-primary-500"],[1,"mt-1","text-xs","text-red-600","dark:text-red-400"],[1,"mt-6","flex","items-center","justify-end","gap-x-6"],["type","button",1,"text-sm/6","font-semibold","text-gray-900","dark:text-white",3,"click"],["type","submit",1,"rounded-md","bg-primary-500","px-3","py-2","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-600","dark:bg-primary-500","dark:shadow-none","dark:focus-visible:outline-primary-500"]],template:function(t,i){if(t&1&&(o(0,"form",0),s("ngSubmit",function(){return i.onSubmit()}),o(1,"h2",1),y(2),a(),o(3,"p",2),y(4,"A unique type name for account related activities. "),a(),o(5,"div",3)(6,"div")(7,"label",4),y(8,"Activity Type Name"),a(),o(9,"div",5),d(10,"input",6),a(),A(11,J,2,1,"div",7),a()(),o(12,"div",8)(13,"button",9),s("click",function(){return i.onCancel()}),y(14,"Cancel"),a(),o(15,"button",10),y(16,"Save"),a()()()),t&2){let c;l("formGroup",i.activityTypeForm),r(2),w(i.formTitle),r(9),f((c=i.activityTypeForm.get("activityTypeName"))!=null&&c.invalid&&((c=i.activityTypeForm.get("activityTypeName"))!=null&&c.dirty||(c=i.activityTypeForm.get("activityTypeName"))!=null&&c.touched)?11:-1)}},dependencies:[q,R,k,V,L,O,B],encapsulation:2})};var K=["accountActivityTypeFormModal"];function W(n,e){if(n&1&&(o(0,"div"),d(1,"app-custom-datatable",13),a()),n&2){let t=b();r(),l("records",t.accountActivityTypes)("columns",t.accountActivityTypeListColumns)("currentPage",1)("pageSize",t.accountActivityTypes.length)("totalRecords",t.accountActivityTypes.length)("rowActions",t.leadSourceRowActions)("disableSearch",!0)}}var h=class n{toastService=u(D);accountActivityTypeService=u(H);pageBreadcrumbs=[{label:"Home",path:"/"},{label:"Account Master",path:"/admin/account-master"}];contentTabs=[{id:"account-activity-type",label:"Account Activity Type",active:!0}];currentContent="account-activity-type";accountActivityTypes=[];accountActivityTypeListColumns=[{field:"activityTypeId",label:"Activity Type ID",hidden:!0},{field:"activityTypeName",label:"Activity Type Name"},{field:"isSystemDefined",label:"System Defined",cellTemplate:"color-badge",colorBadgeMapper:{true:"green",false:"red"},valueMapper:{true:"Yes",false:"No"}},{field:"createdAt",label:"Created Time",cellTemplate:"datetime"}];leadSourceRowActions=[{label:"Edit",actionCallback:e=>{this.openAccountActivityTypeFormModal(e)}}];ngOnInit(){this.loadAccountActivityTypes()}onContentTabChange(e){this.currentContent=e.tab.id,e.tab.id==="account-activity-type"&&this.loadAccountActivityTypes()}loadAccountActivityTypes(){this.accountActivityTypeService.getAccountActivityTypes().subscribe({next:e=>{this.accountActivityTypes=e},error:e=>{console.error("Error fetching account activity types:",e)}})}onCreateMasterData(){this.currentContent==="account-activity-type"&&this.openAccountActivityTypeFormModal()}accountActivityTypeToEdit=null;accountActivityTypeFormTitle="Create Account Activity Type";accountActivityTypeFormModal;openAccountActivityTypeFormModal(e){e&&e.activityTypeId?(this.accountActivityTypeToEdit=e,this.accountActivityTypeFormTitle="Edit Account Activity Type"):(this.accountActivityTypeToEdit=null,this.accountActivityTypeFormTitle="Create Account Activity Type"),this.accountActivityTypeFormModal.open()}closeAccountActivityTypeFormModal(){this.accountActivityTypeFormModal.close(),this.accountActivityTypeToEdit=null}onAccountActivityTypeFormSubmit(e){this.accountActivityTypeToEdit?this.accountActivityTypeService.updateAccountActivityType(this.accountActivityTypeToEdit.activityTypeId,{activityTypeName:e.activityTypeName}).subscribe({next:t=>{if(t&&t.activityTypeId){this.toastService.success("Account Activity Type updated successfully!"),this.loadAccountActivityTypes(),this.closeAccountActivityTypeFormModal();return}},error:t=>{console.error("Error updating account activity type:",t)}}):this.accountActivityTypeService.createAccountActivityType({activityTypeName:e.activityTypeName}).subscribe({next:t=>{if(t&&t.activityTypeId){this.toastService.success("Account Activity Type created successfully!"),this.loadAccountActivityTypes(),this.closeAccountActivityTypeFormModal();return}},error:t=>{console.error("Error creating account activity type:",t)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=T({type:n,selectors:[["app-account-master-listing"]],viewQuery:function(t,i){if(t&1&&F(K,5),t&2){let c;E(c=x())&&(i.accountActivityTypeFormModal=c.first)}},decls:15,vars:8,consts:[["accountActivityTypeFormModal",""],[1,"px-4","sm:px-6","lg:px-8"],[1,"sm:flex","sm:items-center"],[1,"sm:flex-auto"],[1,""],["description","Manage the master list of all accounts including their activity types and details.",3,"title","breadcrumbs"],[1,"sm:mt-0","sm:ml-16","sm:flex-none"],["type","button",1,"block","rounded-md","bg-primary-500","px-3","py-2","text-center","text-sm","font-semibold","text-white","shadow-xs","hover:bg-primary-500/80","focus-visible:outline-2","focus-visible:outline-offset-2","focus-visible:outline-primary-500","dark:bg-primary-500","dark:hover:bg-indigo-400","dark:focus-visible:outline-primary-500",3,"click"],[1,"mt-6"],["mode","content",3,"tabChange","tabs"],[1,"p-2","bg-gray-50/20","dark:bg-gray-800","rounded-lg"],[3,"closeModal","modalId"],[3,"formCancel","formSubmit","formTitle","activityTypeData","activityTypeId"],[3,"records","columns","currentPage","pageSize","totalRecords","rowActions","disableSearch"]],template:function(t,i){if(t&1){let c=S();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),d(4,"app-page-heading",5),a()(),o(5,"div",6)(6,"button",7),s("click",function(){return p(c),m(i.onCreateMasterData())}),y(7," Create New Master "),a()()(),o(8,"div",8)(9,"app-tabs",9),s("tabChange",function(_){return p(c),m(i.onContentTabChange(_))}),a(),o(10,"div",10),A(11,W,2,7,"div"),a()()(),o(12,"app-modal-small",11,0),s("closeModal",function(){return p(c),m(i.closeAccountActivityTypeFormModal())}),o(14,"app-account-activity-type-form",12),s("formCancel",function(){return p(c),m(i.closeAccountActivityTypeFormModal())})("formSubmit",function(_){return p(c),m(i.onAccountActivityTypeFormSubmit(_))}),a()()}if(t&2){let c;r(4),l("title","Account Master")("breadcrumbs",i.pageBreadcrumbs),r(5),l("tabs",i.contentTabs),r(2),f((c=i.currentContent)==="account-activity-type"?11:-1),r(),l("modalId","account-activity-type-form-modal"),r(2),l("formTitle",i.accountActivityTypeFormTitle)("activityTypeData",i.accountActivityTypeToEdit)("activityTypeId",(i.accountActivityTypeToEdit==null?null:i.accountActivityTypeToEdit.activityTypeId)||null)}},dependencies:[z,Q,P,j,g],encapsulation:2})};var Mt=[{path:"list",component:h}];export{Mt as ACCOUNT_MASTER_ROUTES};
