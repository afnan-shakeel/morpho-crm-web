import{i,v as L,w as g,x as u}from"./chunk-YMK4QOIO.js";import{A as n,Q as c,V as o,o as d,s}from"./chunk-MI4VSIZJ.js";var h=class l{api=o(L);toastService=o(g);errorHandler=o(u);getLeads(a,r,e,t,y,A=!1){let I={eagerFetch:A,globalSearch:{value:a||""},filters:r||[],sort:e||{},pagination:{page:t||1,limit:y||10}};return this.api.post("leads/search",I).pipe(n(p=>(this.errorHandler.handleError(p),d({}))),s(p=>p.data))}getLeadsLookupData(){return this.api.get("leads/lookup-data").pipe(n(a=>(console.error("Error fetching leads lookup data:",a),this.toastService.error("Failed to fetch leads lookup data. Please try again later."),d({}))),s(a=>a.data))}getLeadAddress(a){return this.api.get(`leads/${a}/address-primary`).pipe(n(r=>d({})),s(r=>r.data))}createLead(a){return this.api.post("leads/create",a).pipe(n(r=>(this.errorHandler.handleError(r),d({}))),s(r=>r.data))}updateLead(a){return this.api.post("leads/update",a).pipe(n(r=>(this.errorHandler.handleError(r),d({}))),s(r=>r.data))}getLeadById(a,r=!1){let e=new i;return r&&(e=e.set("eagerFetch","true")),this.api.get(`leads/${a}`,e).pipe(n(t=>(console.error("Error fetching lead:",t),this.toastService.error("Failed to fetch lead details. Please try again later."),d({}))),s(t=>t.data))}createLeadAddress(a,r){return this.api.post(`leads/${a}/address/create`,r).pipe(n(e=>(this.errorHandler.handleError(e),d(null))),s(e=>e.data))}updateLeadAddress(a,r){return this.api.post(`leads/${a}/address/update`,r).pipe(n(e=>(this.errorHandler.handleError(e),d(null))),s(e=>e.data))}getLeadLogs(a,r=!1){let e=new i;return r&&(e=e.set("eagerFetch","true")),this.api.get(`leads/${a}/logs`,e).pipe(n(t=>(console.error("Error fetching lead logs:",t),this.toastService.error("Failed to fetch lead logs. Please try again later."),d([]))),s(t=>t.data))}createLeadInteraction(a,r){return this.api.post(`leads/${a}/interaction/create`,r).pipe(n(e=>this.errorHandler.handleError(e)),s(e=>e.data))}updateLeadInteraction(a,r,e){return this.api.post(`leads/${a}/interaction/update/${r}`,e).pipe(n(t=>(this.errorHandler.handleError(t),d(null))),s(t=>t.data))}getLeadInteractions(a,r=!1){let e=new i;return r&&(e=e.set("eagerFetch","true")),this.api.get(`leads/${a}/interaction`,e).pipe(n(t=>(console.error("Error fetching lead interactions:",t),this.toastService.error("Failed to fetch lead interactions. Please try again later."),d([]))),s(t=>t.data))}getLeadInteractionById(a,r){return this.api.get(`leads/${a}/interaction/${r}`).pipe(n(e=>(console.error("Error fetching lead interaction:",e),this.toastService.error("Failed to fetch lead interaction. Please try again later."),d({}))),s(e=>e.data))}updateLeadStatus(a,r){return this.api.post(`leads/status-update/${a}`,{leadStatus:r}).pipe(n(e=>(this.errorHandler.handleError(e),d(null))),s(e=>e.data))}getLeadSources(){return this.api.get("leads/sources").pipe(n(a=>(console.error("Error fetching lead sources:",a),this.toastService.error("Failed to fetch lead sources. Please try again later."),d([]))),s(a=>a.data))}getLeadSourceById(a){return this.api.get(`leads/sources/${a}`).pipe(n(r=>(console.error("Error fetching lead source:",r),this.toastService.error("Failed to fetch lead source. Please try again later."),d({}))),s(r=>r.data))}convertLeadToCustomer(a,r){return this.api.post(`leads/convert/${a}`,{isMergeConfirmed:r}).pipe(n(e=>(this.errorHandler.handleError(e),d(null))),s(e=>e.data))}searchLeadsForAutocomplete(a,r=10){let e={globalSearch:{value:a||""},filters:[],sort:{field:"accountName",direction:"asc"},pagination:{page:1,limit:r}};return this.api.post("leads/search",e).pipe(n(t=>(this.errorHandler.handleError(t),d([]))),s(t=>t.data?.data||[]))}static \u0275fac=function(r){return new(r||l)};static \u0275prov=c({token:l,factory:l.\u0275fac,providedIn:"root"})};export{h as a};
