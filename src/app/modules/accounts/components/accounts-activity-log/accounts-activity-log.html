<div>
    <div class="flex items-center justify-between">
        <h3 class="text-md font-medium leading-5 text-gray-900 dark:text-gray-100">Activity Timeline</h3>
        <a (click)="openActivityFormModal()"
            class=" px-3 py-1.5 text-xs font-medium text-primary-500 hover:underline hover:text-primary-500/80 focus:outline-none ">
            Add New Activity
        </a>
    </div>
    @if (!accountActivities || accountActivities.length === 0) {
    <div class="text-center text-gray-400 dark:text-gray-500 py-8">
        No logs to display.
    </div>
    }
    @else {
    <!-- Include this script tag or install `@tailwindplus/elements` via npm: -->
    <!-- <script src="https://cdn.jsdelivr.net/npm/@tailwindplus/elements@1" type="module"></script> -->
    <ul role="list" class="divide-y divide-gray-100 dark:divide-white/5 max-h-[400px] overflow-y-auto mt-4 rounded-lg p-4">
        @for (item of accountActivities; track item.activityId) {
        <li class="flex items-center justify-between py-2.5">
            <div class="min-w-0">
                <div class="flex items-start gap-x-3">
                    <p class="text-sm/6 font-semibold text-gray-900 dark:text-white">{{item.activityHeader ||
                        'Activity'}}</p>
                    <p
                        class="mt-0.5 rounded-md bg-gray-50 px-1.5 py-0.5 text-xs font-medium text-gray-600 inset-ring inset-ring-gray-500/10 dark:bg-gray-400/10 dark:text-gray-400 dark:inset-ring-gray-400/20">
                        {{getActivityTypeLabel(item.activityType)}}</p>
                </div>
                <div class="mt-1 flex items-center gap-x-2 text-xs/5 text-gray-500 dark:text-gray-400">
                    <span class="font-semibold lowercase">{{item.relatedTo || 'Log'}}</span>
                    <svg viewBox="0 0 2 2" class="size-0.5 fill-current">
                        <circle r="1" cx="1" cy="1" />
                    </svg>
                    <p class="whitespace-nowrap">
                        {{item.activityLog }}
                    </p>
                </div>
            </div>
            <div class="flex flex-none items-center gap-x-1 mt-1 text-xs/5 text-gray-500 dark:text-gray-400">
                <p class="whitespace-nowrap"><time datetime="2023-03-17T00:00Z">{{ item.timestamp | date: 'short'
                        }}</time></p>
                <p class="whitespace-nowrap lowercase">{{ `(${item.performedBy.fullName || ''})` }}</p>
            </div>
        </li>
        }
    </ul>
    }

</div>
<app-modal-small #activityForm [modalId]="'activity-form-modal'" (closeModal)="closeActivityFormModal()">
    <div class="mt-3 text-center sm:mt-0 sm:text-left">
        <!-- <h3 id="dialog-title" class="text-base font-semibold text-gray-900 dark:text-white">Account Form</h3> -->
        <div class="mt-2">
            <!-- <p class="text-sm text-gray-500 dark:text-gray-400">Fill in the details to create a new account:</p> -->
        </div>
        <div class="mt-4">
            <app-activity-form [activityId]="selectedActivityIdToUpdate()" [accountId]="accountId"
                [relatedTo]="activityRelatedTo" [relatedEntityId]="activityRelatedEntityId"
                (formSubmit)="onActivityFormSubmit($event)" [resetFormEvent]="resetFormEvent()"></app-activity-form>
        </div>
    </div>
    <div class="mt-5 sm:mt-4 sm:flex sm:flex-row-reverse">
    </div>
</app-modal-small>